(this["webpackJsonpphone-book"]=this["webpackJsonpphone-book"]||[]).push([[0],{24:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),a=t(18),i=t.n(a),u=(t(24),t(19)),o=t(8),s=t(5),d=t(3),l=t(0);var b=function(e){e.persons;var n=e.handleFilter;return Object(l.jsxs)("div",{children:[" filter shown with:",Object(l.jsx)("input",{onChange:n,name:"filter"})]})};var j=function(e){var n=e.addPerson,t=e.handleChange,c=e.newPerson;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:[" name:",Object(l.jsx)("input",{onChange:t,value:c.name,name:"name"})]}),Object(l.jsxs)("div",{children:[" number:",Object(l.jsx)("input",{onChange:t,value:c.number,name:"number"})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})};var f=function(e){var n=e.filterResult,t=e.persons,c=e.handleDelete;return Object(l.jsx)("div",{children:Object(l.jsx)("ul",{children:n?n.map((function(e,n){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("span",{children:[e.name," ",e.number]}),Object(l.jsx)("button",{onClick:function(){return c(e.id)},children:"delete"})]},n)})):t.map((function(e,n){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("span",{children:[e.name," ",e.number]}),Object(l.jsx)("button",{onClick:function(){return c(e.id)},children:"delete"})]},n)}))})})},h=t(6),m=t.n(h),O="/api/persons",v=function(){return m.a.get(O).then((function(e){return e.data}))},x=function(e){return m.a.post(O,e).then((function(e){return e.data}))},p=function(e,n){return m.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},w=function(e){var n=e.message,t=e.content;return null===n?null:Object(l.jsx)("div",{className:t,children:n})},C=function(){var e=Object(c.useState)([]),n=Object(d.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)({name:"",number:""}),i=Object(d.a)(a,2),h=i[0],m=i[1],O=Object(c.useState)(""),C=Object(d.a)(O,2),k=C[0],S=C[1],P=Object(c.useState)(null),F=Object(d.a)(P,2),D=F[0],T=F[1],y=Object(c.useState)(null),I=Object(d.a)(y,2),L=I[0],A=I[1];Object(c.useEffect)((function(){v().then((function(e){return r(e)}))}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(b,{person:t,handleFilter:function(e){var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value)}));S(n)}}),Object(l.jsx)(w,{message:D,content:L}),Object(l.jsx)("h2",{children:"Add a new"}),Object(l.jsx)(j,{addPerson:function(e){e.preventDefault();var n={name:h.name,number:h.number};if(h.name&&h.number){var c=t.filter((function(e){return e.name===h.name}));c.length>0?(window.confirm("".concat(h.name," is already added to phonebook, replace the old number with the new one?"))&&p(c[0].id,n).then((function(e){r(t.map((function(e){return e.id===c[0].id?Object(s.a)(Object(s.a)({},e),{},{number:n.number}):e}))),T("Changed ".concat(n.name)),A("noti"),setTimeout((function(){T(null)}),3e3)})),m({name:"",number:""})):x(n).then((function(e){r([].concat(Object(u.a)(t),[e])),m({name:"",number:""}),T("Added ".concat(n.name)),A("noti"),setTimeout((function(){T(null)}),3e3)}))}},handleChange:function(e){m(Object(s.a)(Object(s.a)({},h),{},Object(o.a)({},e.target.name,e.target.value)))},newPerson:h}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(f,{filterResult:k,persons:t,handleDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name))&&g(e).then((function(n){var c=t.filter((function(n){return n.id!==e}));r(c)})).catch((function(c){T("Information of ".concat(n.name," has already been removed from server")),A("error"),setTimeout((function(){T(null)}),3e3),r(t.filter((function(n){return n.id!==e})))}))}})]})},k=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,45)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(C,{})}),document.getElementById("root")),k()}},[[44,1,2]]]);
//# sourceMappingURL=main.138ab782.chunk.js.map